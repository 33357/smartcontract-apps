# 以太坊扩容：L2 详解

## 备注

时间：2023 年 6 月 29 日

作者：[33357](https://github.com/33357)

## 正文

### 以太坊扩容

自从以太坊成为行业标准，其性能不足的问题就一直饱受诟病。其实扩展区块链性能无非就两条路：开源或者节流。

所谓开源，就是提高区块链的吞吐能力，这方面目前主流的方案就是分片。但是以太坊的分片方案一直在延期，现在看来在短时间内是没有指望的。至于节流，就是减少单笔交易在链上的数据，以容纳更多的交易。这块的方案倒是比较成熟，并且已经在市场上形成不小的影响，那就是 L2。

### 侧链与 L2

在 L2 还没有火爆之前，侧链才是以太坊扩容方向的热点，很多人到现在都没搞清楚两者的区别。实际上所谓侧链，就是兼容 EVM，且与以太坊有跨链桥可以互通资产的区块链。这些侧链上的交易数据保存在自己的链上，使用自己的代币支付 Gas，和以太坊的关联性并不强，随时都可以自立门户。比如不管是 polygon 还是 bsc 都可以自称为以太坊侧链，但也可以申明自己其实是一条主链。

L2 则完全不同。L2 需要将交易数据压缩后放在以太坊上，所以必须把 ETH 作为支付 Gas 的代币，也不能脱离以太坊作为一条主链来使用。目前火热的 Arbitrum、Optimism、zkSync，本质上都是以太坊上的交易数据压缩方案，他们发行的代币都只有治理功能。只要把以太坊作为主链，以后的 L3、L4 也都摆脱不了把 ETH 作为 Gas 支付代币的命运。

就我看来，所谓的侧链都是新链蹭以太坊热点出来的东西：没有开发生态，所以要兼容EVM；没有流动资金，所以要做跨链桥。所有好处都是他们自己的，对于以太坊的发展来说并没有什么意义。而 L2 能提高以太坊的交易容量，是能降低用户成本，提高生产效率的东西。

### L2 的路线

L2 能对交易数据进行压缩，所做的都是同一件事：把证明而不是数据保存到以太坊。相比原生数据，将数据的证明上链无疑减少了数据量和 Gas 费。而实现证明的路线又分为欺诈证明和零知识证明。

欺诈证明本质上是一个信任系统。你发送一笔交易，证明人会发表一个证明：你发送交易的计算结果是 A。这个证明出来的结果默认是正确的，但有一定时间的质疑期。其他证明人可以在质疑期内提交不同结果 B 来发起质疑，链上的节点会重新计算来验证谁的结果是对的，被验证错误的证明人会被扣除保证金。这个系统只有在证明被质疑时才需要消耗计算资源来做验证，如果证明人都是诚信的，效率会非常高。Arbitrum、Optimism 就是欺诈证明路线中的主流代表。

零知识证明则完全不同，它不依靠信任系统，而是完全使用数学上的计算来证明结果。具体的算法我也说不清，简单来说就是把复杂的求解计算简化成对已知结果的证明计算。由于在数学上完全可靠，因此不需要像欺诈证明一样搭建一个关系系统，也没有质疑期。但零知识证明依旧需要一定的计算量，没办法像欺诈证明一样有机会达到效率的极致。zkSync 就是零知识证明路线中的主流代表。

### L2 的安全性

L2 虽然可以压缩交易数据，提高以太坊的吞吐量，但其代价是牺牲了安全性。

目前大部分的 L2 架构都是自建一条链来处理原始交易数据，再通过跨链桥实现资产和数据在 ETH 上的交换。这个架构的安全风险主要有两个：一个是 L2 的链不够去中心化，实际上在项目早期绝大多数节点都由官方控制，有过于中心化的风险；另一个就是项目实际资产都在跨链桥上，一旦跨链桥被盗，L2 上就只剩一堆价值为零的数据了。

### L2 和 DAPP

将交易数据压缩以提高运行性能并不是 L2 的专利，实际上许多受限于区块链性能的 DAPP 早就尝试过这种办法，比如 DYDX。不过 DAPP 的主流方案是自己搭建一个专用链，用于满足额外的计算需求。但这种方案并不是通用的，也难以被第三方信任。L2 依托 ETH 做验证，可以被第三方信任，并且通用性更好，以后对性能要求高的 DAPP 可能会迁移到 L2。

### 总结

L2 是有前途的技术方向，但目前还处于鱼龙混杂的情况。技术方案和价格市场是两个不同的维度，决定哪个项目能占据 L2 的头部，不一定是技术，还要考虑市场的实际需求。想要在 L2 板块做投资的同学一定要慎重考虑。

最后再说一个个人的判断，如果 L2 在 ETH 上消耗的 gas 费超过了 ETH gas 费总量的一半，那么说明 L2 生态已经成熟了。如果 L2 在 ETH 上消耗的 gas 费超占据了 ETH gas 费总量的九成，那么由于交易成本相差巨大，所有在 ETH 上的项目都必须迁入 L2 才能存活下去。